<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>
    /*
     二分查找：也称为折半查找，是一种高效的查找算法。它只适用于有序数组或有序列表，并通过将查找区间逐渐缩小一半来快速定位目标元素。 

      1. 确定待查找数组的左边界left和右边界right，初始时left为数组的第一个元素索引，right为数组的最后一个元素索引。
      2. 计算中间元素的索引mid，mid = (left + right) // 2。
      3. 比较目标元素与中间元素的值，如果目标元素等于中间元素，查找成功，返回中间元素的索引。
      4. 如果目标元素小于中间元素，说明目标元素在中间元素的左边，将right更新为mid-1，缩小查找区间。
      5. 如果目标元素大于中间元素，说明目标元素在中间元素的右边，将left更新为mid+1，缩小查找区间。
      6. 重复步骤2至5，直到查找区间为空（left > right），查找失败，返回-1。
   */

    function binarySearch(arr, target) {
      if (arr.length === 0) return -1;
      let left = 0;
      let right = arr.length - 1;
      while (left <= right) {
        let mid = Math.floor((left + right) / 2);

        if (arr[mid] === target) {
          return mid;
        } else if (arr[mid] < target) {
          left = mid + 1;
        } else {
          right = mid - 1;
        }
      }

      return -1;
    }

    // 示例
    const testarr = [11, 22, 25, 34, 64, 90];
    const target = 25;
    const result = binarySearch(testarr, target);
    console.log("目标元素的索引:", result); // 输出：2

    /*
       二分查找变形问题：
        1. 查找第一个值等于给定值的元素；
        2. 查找最后一个值等于给定值的元素；
        3. 查找第一个大于等于给定值的元素；
        4. 查找最后一个小于等于给定值的元素；
    */

        // 查找第一个等于给定值
        const biaryFindFirst = (sortedArr, target) => {
          if (sortedArr.length === 0) return -1
          let low = 0
          let high = sortedArr.length - 1
          while (low <= high) {
            const mid = Math.floor((low + high) / 2)

            if (target < sortedArr[mid]) {
              high = mid - 1
            } else if (target > sortedArr[mid]) {
              low = mid + 1
            } else {
              if (mid === 0 || sortedArr[mid - 1] < target) return mid
              high = mid - 1
            }
          }
          return -1
        }

        // 查找最后一个相等的数
        const biaryFindLast = (sortedArr, target) => {
          if (sortedArr.length === 0) return -1
          let low = 0
          let high = sortedArr.length - 1
          while (low <= high) {
            const mid = Math.floor((low + high) / 2)
            if (target < sortedArr[mid]) {
              high = mid - 1
            } else if (target > sortedArr[mid]) {
              low = mid + 1
            } else {
              if (mid === sortedArr.length - 1 || sortedArr[mid + 1] > target) return mid
              low = mid + 1
            }
          }
          return -1
        }

        // 查找第一个大于等于给定值的元素
        const biaryFindFistBig = (sortedArr, target) => {
          if (sortedArr.length === 0) return -1
          let low = 0
          let high = sortedArr.length - 1
          while (low <= high) {
            const mid = Math.floor((low + high) / 2)
            if (target <= sortedArr[mid]) {
              if (mid === 0 || sortedArr[mid - 1] < target) return mid
              high = mid - 1
            } else {
              low = mid + 1
            }
          }
          return -1
        }

        // 查找最后一个小于等于给定值的元素
        const biaryFindLastSmall = (sortedArr, target) => {
          if (sortedArr.length === 0) return -1
          let low = 0
          let high = sortedArr.length - 1
          while (low <= high) {
            const mid = Math.floor((low + high) / 2)

            if (target < sortedArr[mid]) {
              high = mid - 1
            } else {
              if (mid === sortedArr.length - 1 || sortedArr[mid + 1] >= target) return mid
              low = mid + 1
            }
          }
          return -1
        }

        const arr = [1, 2, 3, 4, 4, 4, 4, 4, 6, 7, 8, 8, 9]
        const first = biaryFindFirst(arr, 4)
        console.log(`FindFirst: ${first}`)

        const last = biaryFindLast(arr, 4)
        console.log(`FindLast: ${last}`)
        const FisrtBig = biaryFindFistBig(arr, 5)
        console.log(`FindFisrtBig: ${FisrtBig}`)
        const LastSmall = biaryFindLastSmall(arr, 4)
        console.log(`FindLastSmall: ${LastSmall}`)




  </script>

</body>

</html>